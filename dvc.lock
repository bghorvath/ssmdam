schema: '2.0'
stages:
  train:
    cmd: python acoustic_anomaly_detection/train.py
    deps:
    - path: acoustic_anomaly_detection/dataset.py
      hash: md5
      md5: f5a4da5b2665a73b60528fb5601b8f75
      size: 1103
    - path: acoustic_anomaly_detection/model.py
      hash: md5
      md5: 2ce9af6616e769d19cb587ef269bcf03
      size: 7509
    - path: data/prepared/
      hash: md5
      md5: 8745479ece61c880457b861514ff5ac9.dir
      size: 6653137655
      nfiles: 8401
    params:
      params.yaml:
        data:
          train_split: 0.8
          fast_dev_run: false
          data_sources:
          - dcase2023t2
        model:
          type: baseline_ae
          layers:
            hidden_size: 128
            latent_size: 8
        train:
          seed: 42
          epochs: 100
          batch_size: 16
          lr: 0.001
        transform:
          type: mel_spectrogram
          segment: false
          params:
            sr: 16000
            duration: 10
            n_fft: 1024
            hop_length: 512
            n_mels: 128
            n_mfcc: 40
    outs:
    - path: models/
      hash: md5
      md5: d3a51ab352355f4f39f5adf02bcd698a.dir
      size: 0
      nfiles: 1
  evaluate:
    cmd: python acoustic_anomaly_detection/evaluate.py
    deps:
    - path: acoustic_anomaly_detection/evaluate.py
      hash: md5
      md5: ec7c24423b82eea1c94939e8d432ef35
      size: 2408
    - path: models/
      hash: md5
      md5: b521e5f0c64c893f0a32f990cf202832.dir
      size: 19657162
      nfiles: 6
    params:
      params.yaml:
        model:
          type: baseline_ae
          layers:
            hidden_size: 128
            latent_size: 8
    outs:
    - path: results/
      hash: md5
      md5: 6691987f06f367ff57c3ad7b853cb519.dir
      size: 106233
      nfiles: 51
  prepare:
    cmd: python acoustic_anomaly_detection/prepare.py
    deps:
    - path: data/raw/
      hash: md5
      md5: f7daf6215c792c4b44a0ed1e09e3983e.dir
      size: 2842645105
      nfiles: 8409
    params:
      params.yaml:
        data:
          train_split: 0.8
          fast_dev_run: false
          data_sources:
          - dcase2023t2
        transform:
          type: mel_spectrogram
          segment: false
          params:
            sr: 16000
            duration: 10
            n_fft: 1024
            hop_length: 512
            n_mels: 128
            n_mfcc: 40
    outs:
    - path: data/prepared/
      hash: md5
      md5: 8745479ece61c880457b861514ff5ac9.dir
      size: 6653137655
      nfiles: 8401
  test:
    cmd: python acoustic_anomaly_detection/test.py
    deps:
    - path: models/
      hash: md5
      md5: d3a51ab352355f4f39f5adf02bcd698a.dir
      size: 0
      nfiles: 1
    params:
      params.yaml:
        model:
          type: baseline_ae
          layers:
            hidden_size: 128
            latent_size: 8
    outs:
    - path: results/
      hash: md5
      md5: d3a51ab352355f4f39f5adf02bcd698a.dir
      size: 0
      nfiles: 1
